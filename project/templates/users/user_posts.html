{% extends 'base.html' %}

<!-- start block content  -->
{% block content %}

<div class="row align-items-center">
    <div class="container-inner">

        <!-- heading  -->
        <!-- <a href="#" onclick="window.history.back(); return false;" class="btn-link quat-sans-reg reg-size dark-gray-text text-decoration-underline">Back</a> -->


        <div class="d-flex flex-column flex-md-row align-items-start align-items-md-center mb-4 pb-4 with-divider">
            <!-- profile image -->
            <div>
                <img src="{{ url_for('static', filename='profile_pics/' + user.profile_image) }}" alt="Profile Image" class="pro-img me-md-3 mb-3 mb-md-0">
            </div>

            <!-- username, role, location, date -->
            <div class="align-items-center w-100">
                <div class="d-flex flex-wrap align-items-center">
                    <span class="heading-text">{{ user.username }}</span>
                    <span class="quat-sans-reg reg-size light-gray-text ps-2">/{{ user.role }}</span>
                </div>

                <div class="d-flex align-items-center gap-2 pt-1">
                    <p class="quat-sans-reg reg-size light-gray-text mb-0">{{ user.location }}</p>
                    <div style="width: 1px; height: 16px; background-color: #CBD0D0;"></div>
                    <p class="quat-sans-reg reg-size light-gray-text mb-0">Joined {{ user.account_created.strftime('%B %Y') }}</p>
                </div>

                <!-- bio - will move below on mobile -->
                <p class="quat-sans-reg reg-size dark-gray-text pt-2 mb-0 w-100">
                    {% if user.bio %}{{ user.bio }}{% endif %}
                </p>
            </div>
        </div>





        <!-- blogs  -->
        {% for post in posts.items %}
        <div>

            <div class="mt-4 with-divider" style="padding-bottom: 20px;">
                <a href="{{url_for('blog_posts.blog_post', blog_post_id=post.id)}}" class="image-container">
                    <img class="rounded-0" src="{{ url_for('static', filename='blog_cover_images/' + post.cover_image) }}" alt="blog image">
                </a>

                <div class="px-0 pt-3">
                    <!-- category -->
                    <div class=""><a href="{{ url_for('blog_posts.category_posts', category_slug=post.category) }}" class="category-tag quat-sans-reg reg-size">{{ post.category | replace('_', ' ') | title }}</a></div>

                    <!-- title  -->
                    <div class="pt-2">
                        <a href="{{url_for('blog_posts.blog_post', blog_post_id=post.id)}}" class="heading-text" style="text-decoration: none;">{{ post.title }}</a>
                    </div>


                    <!-- date  -->
                    <p class="quat-sans-reg reg-size light-gray-text pt-1 mb-2">{{ post.date.strftime('%d %B %Y') }}</p>

                    <!-- body text  -->
                    <p class="para-text truncate-text pt-0">{{ post.text }}</p>
                </div>
            </div>

        </div>
        {% endfor %}


        <!-- pagination  -->
        <div class="mt-4">
            <nav aria-label="Page navigation">
                <ul class="pagination custom-pagination">
                    {% if posts.has_prev %}
                    <li class="page-item"><a class="page-link" href="{{ url_for('users.user_posts', username=user.username, page=posts.prev_num) }}">Previous</a></li>
                    {% endif %} {% for page_num in posts.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %} {% if page_num %}
                    <li class="page-item {% if posts.page == page_num %}active{% endif %}">
                        <a class="page-link" href="{{ url_for('users.user_posts', username=user.username, page=page_num) }}">{{ page_num }}</a>
                    </li>
                    {% else %}
                    <li class="page-item disabled">
                        <span class="page-link">...</span>
                    </li>
                    {% endif %} {% endfor %} {% if posts.has_next %}
                    <li class="page-item">
                        <a class="page-link" href="{{ url_for('users.user_posts', username=user.username, page=posts.next_num) }}">Next</a>
                    </li>
                    {% endif %}
                </ul>
            </nav>

        </div>


    </div>
</div>


<!-- end of block content  -->
{% endblock %}
{% extends 'base.html' %}

<!-- start block content  -->
{% block content %}

<div class="row align-items-center">
    <div class="container-inner">

        <!-- heading  -->
        <div class="align-items-center mb-4 pb-4 with-divider">
            <!-- <a href="#" onclick="window.history.back(); return false;" class="btn-link quat-sans-reg reg-size dark-gray-text text-decoration-underline">Back</a> -->
            <p class="quat-sans-reg reg-size dark-gray-text mb-1">Browse Posts in</p>
            <span class="heading-text">{{ category_name }}</span>
            <span class="quat-sans-reg reg-size light-gray-text p-1"> ({{ total_posts }} post{{ 's' if total_posts != 1 }})</span>
        </div>



        <!-- blogs  -->
        {% for post in posts.items %}
        <div>

            <div class="mt-4 with-divider" style="padding-bottom: 20px;">
                <a href="{{url_for('blog_posts.blog_post', blog_post_id=post.id)}}" class="image-container">
                    <img class="rounded-0" src="{{ url_for('static', filename='blog_cover_images/' + post.cover_image) }}" alt="blog image">
                </a>

                <div class="px-0 pt-3">

                    <!-- title -->
                    <div class="mt-0">
                        <a href="{{url_for('blog_posts.blog_post', blog_post_id=post.id)}}" class="heading-text" style="text-decoration: none;">{{ post.title }}</a>
                    </div>


                    <!-- profile image, name, date -->
                    <div class="d-flex align-items-center gap-2 mt-3">

                        <a href="{{url_for('users.user_posts', username=post.author.username)}}">
                            <img src="{{ url_for('static', filename='profile_pics/' + post.author.profile_image) }}" alt="Profile Image" style="width: 30px; height: 30px; border-radius: 50%; object-fit: cover;">
                        </a>


                        <div class="d-flex align-items-center gap-1">
                            <a class="quat-sans-reg reg-size dark-gray-text" style="text-decoration: underline;" href="{{url_for('users.user_posts', username=post.author.username)}}">{{ post.author.username }}</a>
                        </div>

                        <div style="width: 1px; height: 16px; background-color: #CBD0D0;"></div>

                        <div class="d-flex align-items-center gap-1">
                            <span class="quat-sans-reg reg-size light-gray-text">{{ post.date.strftime('%d %B %Y') }}</span>
                        </div>

                    </div>

                    <!-- body text  -->
                    <p class="para-text truncate-text pt-3">{{ post.text }}</p>
                </div>
            </div>

        </div>
        {% endfor %}


        <!-- pagination  -->
        <div class="mt-4">
            <nav aria-label="Category navigation">
                <ul class="pagination custom-pagination">
                    {% if posts.has_prev %}
                    <li class="page-item"><a class="page-link" href="{{ url_for('blog_posts.category_posts', category_slug=category_slug, page=posts.prev_num) }}">Previous</a></li>
                    {% endif %} {% for page_num in posts.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %} {% if page_num %}
                    <li class="page-item {% if page_num == posts.page %}active{% endif %}">
                        <a class="page-link" href="{{ url_for('blog_posts.category_posts', category_slug=category_slug, page=page_num) }}">{{ page_num }}</a>
                    </li>
                    {% else %}
                    <li class="page-item disabled">
                        <span class="page-link">...</span>
                    </li>
                    {% endif %} {% endfor %} {% if posts.has_next %}
                    <li class="page-item">
                        <a class="page-link" href="{{ url_for('blog_posts.category_posts', category_slug=category_slug, page=posts.next_num) }}">Next</a>
                    </li>
                    {% endif %}
                </ul>
            </nav>
        </div>


    </div>
</div>


<!-- end of block content  -->
{% endblock %}